<div class="row">

  <div class="stm_image_fw">
    <img id="{{ entry.m_id }}" src="{{ entry.img_data_fw.data_uri }}" class="hover-shadow" data-slide-num="{{ entry.slide_num }}" />
  </div>
  <div class="stm_image_bw">
    <img id="{{ entry.m_id }}" src="{{ entry.img_data_bw.data_uri }}" class="hover-shadow" data-slide-num="{{ entry.slide_num }}" />
  </div>


  <!-- IMAGE METADATA -->
  <div class="table_column">
    <table>
      <tr>
        <th>Image ID</th>
        <td><a href="file:///{{ entry.fileinfo.filepath }}">{{ entry.m_id }}</td>
      </tr>
      <tr>
        <th>Date & time</th>
        <td>{{ entry.datetime.strftime("%Y-%m-%d %H:%M:%S") }}</td>
      </tr>
      <tr>
        <th>Op. mode</th>
        <td>{{ entry.op_mode }}</td>
      </tr>
      {% if entry.op_mode == 'Dynamic Force' %}
          <tr>
            <th>Cantilever</th>
            <td>{{ entry.cantilever }}</td>
          </tr>
          <tr>
            <th>Ampl. ctrl.</th>
            <td>{{ entry.amp_ctrl_mode }}</td>
          </tr>
          <tr>
            <th>Exc. ampl.</th>
            <td>{{ "{:.1f}".format(entry.excitation_amp) }} mV</td>
          </tr>
          <tr>
            <th>Setpoint</th>
            <td>{{ "{:.1f}".format(entry.current) }} %</td>
          </tr>
          <tr>
            <th>Tip voltage</th>
            <td>{{ "{:+.1f}".format(entry.bias) }} mV</td>
          </tr>
      {% elif entry.op_mode == 'Static Force' %}
          <tr>
            <th>Cantilever</th>
            <td>{{ entry.cantilever }}</td>
          </tr>
          <tr>
            <th>Ampl. ctrl.</th>
            <td>{{ entry.amp_ctrl_mode }}</td>
          </tr>
          <tr>
            <th>Setpoint</th>
            <td>{{ "{:.1f}".format(entry.current) }} nN</td>
          </tr>
          <tr>
            <th>Tip voltage</th>
            <td>{{ "{:+.1f}".format(entry.bias) }} mV</td>
          </tr>
      {% else %}
          <tr>
            <th>I<sub>t</sub></th>
            <td>{{ "{:.2f}".format(entry.current) }} nA</td>
          </tr>
          <tr>
            <th>U<sub>b</sub></th>
            <td>{{ "{:+.1f}".format(entry.bias) }} mV</td>
          </tr>
      {% endif %}
    </table>
  </div>

  <div class="table_column">
    <table>
      <tr>
        <th></th>
        <td>&nbsp;</td>
      </tr>
      {% if entry.p_gain %}
          <tr>
            <th>P / I</th>
            <td>{{ "{:.0f}".format(entry.p_gain) }} / {{ "{:.0f}".format(entry.i_gain) }}</td>
          </tr>
      {% endif %}

      <tr>
        <th>Scan size</th>
        <td>{{ "{:.0f}".format(entry.xsize) }} &#215; {{ "{:.0f}".format(entry.ysize) }} nm&#178;</td>
      </tr>
      <tr>
        <th>Resolution</th>
        <td>{{ entry.xres }} &#215; {{ entry.yres }}</td>
      <tr>
        <th>Line time</th>
        <td>{{ "{:.1f}".format(entry.line_time) }} ms</td>
      </tr>
      </tr>
        <th>Scan time</th>
        <td>{{ "{:.2f}".format(entry.scan_duration) }} s</td>
      </tr>
      <tr>
        <th>Scan direct.</th>
        <td>{{ entry.scan_dir_up_down }}</td>
      </tr>
      <tr>
        <th>Offset</th>
        <td>{{ "{:+.1f}".format(entry.xoffset) }} nm <br> {{ "{:+.1f}".format(entry.yoffset) }} nm</td>
      </tr>
      <tr>
        <th>Rotation</th>
        <td>{{ entry.rotation }}&#176;</td>
      <tr>

    </table>
  </div>

    {% if entry.labjournal_data is not none %}
        <div class="table_column">
            <table>
                {% for key, value in entry.labjournal_data.items() %}
                    <tr>
                        <th>{{ key }}</th>
                        <td>{{ value[0] }}</td>
                    </tr>
                {% endfor %}
            </table>
        </div>
    {% endif %}


</div><!-- End of one row -->
